<%- include("partials/header.ejs") %>

    <body>
        <header id="header" class="fixed-top">
            <div class="container d-flex align-items-center">

                <h1 class="logo me-auto"><a><img class="Logo" src="logo.png" alt=""> Care Point</a></h1>

                <nav id="navbar" class="navbar order-last order-lg-0">
                    <ul>
                        <li>
                            <form id="userHome" action="/userHome" method="post"><a class="nav-link scrollto "
                                    href="javascript:document.getElementById('userHome').submit();">Home</a><input
                                    type="text" name="userName" value="<%= userName %>" id="" hidden> </form>
                        </li>
                        <li>
                            <form id="doctorOnDemand" action="/doctorOnDemand" method="post"><a
                                    class="nav-link scrollto  "
                                    href="javascript:document.getElementById('doctorOnDemand').submit();">Doctor-On-Demand</a><input
                                    type="text" name="userName" value="<%= userName %>" id="" hidden> </form>
                        </li>
                        <li>
                            <form id="clinicAppointment" action="/clinicAppointment" method="post"><a
                                    class="nav-link scrollto  "
                                    href="javascript:document.getElementById('clinicAppointment').submit();">Schedule
                                    Appointment</a><input type="text" name="userName" value="<%= userName %>" id=""
                                    hidden> </form>
                        </li>
                        <li>
                            <form id="schedulemeeting" action="/schedulemeeting" method="post"><a
                                    class="nav-link scrollto active"
                                    href="javascript:document.getElementById('schedulemeeting').submit();">Schedule
                                    Online
                                    Meeting</a><input type="text" name="userName" value="<%= userName %>" id="" hidden>
                            </form>
                        </li>
                        <li>
                            <form id="myAppointments" action="/myAppointments" method="post"><a
                                    class="nav-link scrollto "
                                    href="javascript:document.getElementById('myAppointments').submit();">My
                                    Appointments</a><input type="text" name="userName" value="<%= userName %>" id=""
                                    hidden> </form>
                        </li>

                    </ul>
                    <i class="bi bi-list mobile-nav-toggle"></i>
                </nav>



            </div>
        </header>

        <section id="hero" class="d-flex align-items-center" style="padding-top: 0px">
            <div class="container">
                <h1>Hi <%= userName %> .<br> Welcome to Care Point</h1>
                <h2>Healing lives, with care and compassion.</h2>

            </div>
        </section>

        <main id="main">

            <!-- ======= Why Us Section ======= -->
            <section id="why-us" class="why-us">
                <div class="container">




                    <div class="icon-boxes d-flex flex-column boxshadow">
                        <div class="icon-box mt-4 mt-xl-0" style="padding-top: 30px;">


                            <h3>Schedule Online Appointment</h3>
                            <div class="form">
                                <form action="/onlineDoctorSearch" method="post">
                                    <% if(repeat){ %>
                                        <div class="alert alert-danger" role="alert">You cannot choose same slot twice
                                        </div>
                                        <% } %>
                                            <div class="formContent">
                                                Please fill out the form below to search for physicians and schedule
                                                appointments at their
                                                Clinics
                                            </div>
                                            <div class="formContent reveal1">
                                                Choose your area :
                                                <select name="area" id="" class="form-select"
                                                    aria-label="Default select example">
                                                    <option value="Kengeri">Kengeri</option>
                                                    <option value="Hebbala">Hebbala</option>
                                                    <option value="Krishnarajapuram">Krishnarajapuram</option>
                                                    <option value="Anekal">Anekal</option>
                                                    <option value="Yelahanka">Yelahanka</option>
                                                </select>
                                            </div>

                                            <div class="formContent reveal1">
                                                Choose specialization of the doctor :
                                                <select name="specialization" id="" class="form-select"
                                                    aria-label="Default select example">
                                                    <option value="Neurology">Neurology</option>
                                                    <option value="Orthopedics">Orthopedics</option>
                                                    <option value="ENT">ENT</option>
                                                    <option value="Urology">Urology</option>
                                                    <option value="Opthalmology">Opthalmology</option>
                                                    <option value="Pediatrics">Pediatrics</option>
                                                    <option value="Dermatology">Dermatology</option>
                                                    <option value="Psychiatry">Psychiatry</option>
                                                    <option value="Dentistry">Dentistry</option>
                                                    <option value="Nephrology">Nephrology</option>
                                                    <option value="General Surgery">General Surgery</option>
                                                    <option value="General Physician">General Physician</option>
                                                    <option value="Ayurveda">Ayurveda</option>
                                                    <option value="Nutritionist">Nutritionist</option>

                                                    <option value="Cardiology">Cardiology</option>
                                                    <option value="Gynaecology">Gynaecology</option>
                                                </select>
                                            </div>

                                            <div class="mb-3 reveal1">
                                                <label for="exampleFormControlTextarea1" class="form-label">Enter Your
                                                    Address :</label>
                                                <textarea class="form-control" name="address"
                                                    id="exampleFormControlTextarea1" rows="3" required></textarea>
                                            </div>

                                            <br>
                                            <div class="button reveal1">
                                                <input type="text" name="userName" value="<%= userName %>" id="" hidden>
                                                <button type="submit" class="allButtons">Search Doctors</button>
                                            </div>
                                </form>
                                <% if(onlineDoctorData){ %>

                                    <div class="formContent">
                                        <div class="row">
                                            <% onlineDoctorData.forEach(element=> {%>

                                                <% let g=element.gender.charAt(0).toUpperCase() +
                                                    element.gender.slice(1);%>
                                                    <div class="col-lg-6 col-md-6 col-sm-12 reveal1">
                                                        <div class="card">
                                                            <div class="card-body">

                                                                <div class="container">

                                                                    <form action="/scheduleOnlineAppointment"
                                                                        method="post">
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Name</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : Dr.<%= element.name%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Age</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= element.age%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Gender</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= g%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Experience</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= element.experience%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Area</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= element.area%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Specialization</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= element.specialization%>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-4">
                                                                                <strong>Address</strong>
                                                                            </div>
                                                                            <div class="col-8">
                                                                                : <%= element.address%>
                                                                            </div>

                                                                        </div>
                                                                </div>
                                                                <div class="formContent">
                                                                    <strong> Choose a preferred slot</strong>
                                                                    <p>Slot 1 : 9 A.M to 12 P.M</p>
                                                                    <p>Slot 2 : 1 P.M to 4 P.M</p>
                                                                    <p>Slot 3 : 5 P.M to 8 P.M</p>
                                                                </div>


                                                                <% if(element.schedule[0]){ %>
                                                                    <table class="table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th scope="col">Date</th>
                                                                                <th scope="col">Slot 1</th>
                                                                                <th scope="col">Slot 2</th>
                                                                                <th scope="col">Slot 3</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>


                                                                            <% element.schedule.forEach(ele=> { %>

                                                                                <tr>
                                                                                    <th scope="row">
                                                                                        <% if(ele.date) %>
                                                                                            <%= ele.date %>
                                                                                    </th>
                                                                                    <% let Slot1=ele.date + "slot1" +
                                                                                        ele._id %>
                                                                                        <% let Slot2=ele.date + "slot2"
                                                                                            + ele._id %>
                                                                                            <% let Slot3=ele.date
                                                                                                + "slot3" + ele._id %>
                                                                                                <% if(ele.slot1==="Free"
                                                                                                    ){ %>
                                                                                                    <td>



                                                                                                        <div
                                                                                                            class="form-check">
                                                                                                            <input
                                                                                                                class="form-check-input"
                                                                                                                name="slot"
                                                                                                                type="radio"
                                                                                                                value=<%=Slot1%>
                                                                                                            id="flexCheckDefault">


                                                                                                            <label
                                                                                                                class="form-check-label"
                                                                                                                for="flexCheckDefault">
                                                                                                                <%= ele.slot1
                                                                                                                    %>
                                                                                                            </label>
                                                                                                        </div>

                                                                                                    </td>
                                                                                                    <% }else
                                                                                                        if(ele.slot1==="Busy"
                                                                                                        ){ %>

                                                                                                        <td>
                                                                                                            <%= ele.slot1
                                                                                                                %>
                                                                                                        </td>
                                                                                                        <% } %>


                                                                                                            <% if(ele.slot2==="Free"
                                                                                                                ){ %>
                                                                                                                <td>
                                                                                                                    <div
                                                                                                                        class="form-check">
                                                                                                                        <input
                                                                                                                            class="form-check-input"
                                                                                                                            name="slot"
                                                                                                                            type="radio"
                                                                                                                            value=<%=Slot2
                                                                                                                            %>
                                                                                                                        id="flexCheckDefault">

                                                                                                                        <label
                                                                                                                            class="form-check-label"
                                                                                                                            for="flexCheckDefault">
                                                                                                                            <%= ele.slot2
                                                                                                                                %>
                                                                                                                        </label>
                                                                                                                    </div>
                                                                                                                </td>
                                                                                                                <% }else
                                                                                                                    if(ele.slot2==="Busy"
                                                                                                                    ){
                                                                                                                    %>

                                                                                                                    <td>
                                                                                                                        <%= ele.slot2
                                                                                                                            %>
                                                                                                                    </td>
                                                                                                                    <% }
                                                                                                                        %>

                                                                                                                        <% if(ele.slot3==="Free"
                                                                                                                            ){
                                                                                                                            %>
                                                                                                                            <td>
                                                                                                                                <div
                                                                                                                                    class="form-check">
                                                                                                                                    <input
                                                                                                                                        class="form-check-input"
                                                                                                                                        name="slot"
                                                                                                                                        type="radio"
                                                                                                                                        value=<%=Slot3
                                                                                                                                        %>
                                                                                                                                    id="flexCheckDefault">

                                                                                                                                    <label
                                                                                                                                        class="form-check-label"
                                                                                                                                        for="flexCheckDefault">
                                                                                                                                        <%= ele.slot3
                                                                                                                                            %>
                                                                                                                                    </label>
                                                                                                                                </div>
                                                                                                                            </td>
                                                                                                                            <% }else
                                                                                                                                if(ele.slot3==="Busy"
                                                                                                                                ){
                                                                                                                                %>

                                                                                                                                <td>
                                                                                                                                    <%= ele.slot3
                                                                                                                                        %>
                                                                                                                                </td>
                                                                                                                                <% }
                                                                                                                                    %>

                                                                                </tr>
                                                                                <% }); %>
                                                                        </tbody>
                                                                    </table>
                                                                    <input type="hidden" id="custId" name="doctorName"
                                                                        value="<%= element.name %>">
                                                                    <input type="hidden" id="custId" name="userName"
                                                                        value="<%= userName %>">
                                                                    <input type="hidden" id="custId"
                                                                        name="onlineAppointmentAddress"
                                                                        value="<%= onlineAppointmentAddress %>">

                                                                    <button type="submit" class="allButtons">Schedule
                                                                        Appointment</a>
                                                                        </form>
                                                                        <% }else{ %>
                                                                            <div class="alert alert-danger"
                                                                                role="alert">The doctor has not updated
                                                                                his/her
                                                                                schedule
                                                                            </div>
                                                                            <% } %>









                                                            </div>
                                                        </div>
                                                    </div>
                                                    <% }) %>

                                        </div>
                                    </div>

                                    <% } %>

                            </div>
                        </div>

                    </div><!-- End .content-->



                </div>
            </section>



        </main>

        <%- include("partials/footer.ejs") %>